ARM GAS  /tmp/ccG2n2GW.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"pid.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/pid.c"
  20              		.global	__aeabi_dcmpgt
  21              		.global	__aeabi_dcmplt
  22              		.section	.text.PID_Init,"ax",%progbits
  23              		.align	1
  24              		.global	PID_Init
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  29              	PID_Init:
  30              	.LVL0:
  31              	.LFB123:
   1:Core/Src/pid.c **** ï»¿ /*
   2:Core/Src/pid.c **** ------------------------------------------------------------------------------
   3:Core/Src/pid.c **** ~ File   : pid.c
   4:Core/Src/pid.c **** ~ Author : Majid Derhambakhsh
   5:Core/Src/pid.c **** ~ Version: V1.0.0
   6:Core/Src/pid.c **** ~ Created: 02/11/2021 03:43:00 AM
   7:Core/Src/pid.c **** ~ Brief  :
   8:Core/Src/pid.c **** ~ Support:
   9:Core/Src/pid.c **** 		   E-Mail : Majid.do16@gmail.com (subject : Embedded Library Support)
  10:Core/Src/pid.c **** 
  11:Core/Src/pid.c **** 		   Github : https://github.com/Majid-Derhambakhsh
  12:Core/Src/pid.c **** ------------------------------------------------------------------------------
  13:Core/Src/pid.c **** ~ Description:
  14:Core/Src/pid.c **** 
  15:Core/Src/pid.c **** ~ Attention  :
  16:Core/Src/pid.c **** 
  17:Core/Src/pid.c **** ~ Changes    :
  18:Core/Src/pid.c **** ------------------------------------------------------------------------------
  19:Core/Src/pid.c **** */
  20:Core/Src/pid.c **** 
  21:Core/Src/pid.c **** #include "pid.h"
  22:Core/Src/pid.c **** 
  23:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
  24:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~~~ Initialize ~~~~~~~~~~~~~~~~ */
  25:Core/Src/pid.c **** void PID_Init(PID_TypeDef *uPID)
  26:Core/Src/pid.c **** {
  32              		.loc 1 26 1 view -0
ARM GAS  /tmp/ccG2n2GW.s 			page 2


  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 0
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36              		.loc 1 26 1 is_stmt 0 view .LVU1
  37 0000 2DE9D043 		push	{r4, r6, r7, r8, r9, lr}
  38              		.cfi_def_cfa_offset 24
  39              		.cfi_offset 4, -24
  40              		.cfi_offset 6, -20
  41              		.cfi_offset 7, -16
  42              		.cfi_offset 8, -12
  43              		.cfi_offset 9, -8
  44              		.cfi_offset 14, -4
  45 0004 0446     		mov	r4, r0
  27:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Set parameter ~~~~~~~~~~ */
  28:Core/Src/pid.c **** 	uPID->OutputSum = *uPID->MyOutput;
  46              		.loc 1 28 2 is_stmt 1 view .LVU2
  47              		.loc 1 28 25 is_stmt 0 view .LVU3
  48 0006 436C     		ldr	r3, [r0, #68]
  49              		.loc 1 28 20 view .LVU4
  50 0008 D3E90067 		ldrd	r6, [r3]
  51              		.loc 1 28 18 view .LVU5
  52 000c C0E91467 		strd	r6, [r0, #80]
  29:Core/Src/pid.c **** 	uPID->LastInput = *uPID->MyInput;
  53              		.loc 1 29 2 is_stmt 1 view .LVU6
  54              		.loc 1 29 25 is_stmt 0 view .LVU7
  55 0010 036C     		ldr	r3, [r0, #64]
  56              		.loc 1 29 20 view .LVU8
  57 0012 D3E90023 		ldrd	r2, [r3]
  58              		.loc 1 29 18 view .LVU9
  59 0016 C0E91623 		strd	r2, [r0, #88]
  30:Core/Src/pid.c **** 	
  31:Core/Src/pid.c **** 	if (uPID->OutputSum > uPID->OutMax)
  60              		.loc 1 31 2 is_stmt 1 view .LVU10
  61              		.loc 1 31 28 is_stmt 0 view .LVU11
  62 001a D0E91A89 		ldrd	r8, [r0, #104]
  63              		.loc 1 31 5 view .LVU12
  64 001e 4246     		mov	r2, r8
  65 0020 4B46     		mov	r3, r9
  66 0022 3046     		mov	r0, r6
  67              	.LVL1:
  68              		.loc 1 31 5 view .LVU13
  69 0024 3946     		mov	r1, r7
  70 0026 FFF7FEFF 		bl	__aeabi_dcmpgt
  71              	.LVL2:
  72 002a 18B1     		cbz	r0, .L8
  32:Core/Src/pid.c **** 	{
  33:Core/Src/pid.c **** 		uPID->OutputSum = uPID->OutMax;
  73              		.loc 1 33 3 is_stmt 1 view .LVU14
  74              		.loc 1 33 19 is_stmt 0 view .LVU15
  75 002c C4E91489 		strd	r8, [r4, #80]
  76              	.L1:
  34:Core/Src/pid.c **** 	}
  35:Core/Src/pid.c **** 	else if (uPID->OutputSum < uPID->OutMin)
  36:Core/Src/pid.c **** 	{
  37:Core/Src/pid.c **** 		uPID->OutputSum = uPID->OutMin;
  38:Core/Src/pid.c **** 	}
  39:Core/Src/pid.c **** 	else { }
ARM GAS  /tmp/ccG2n2GW.s 			page 3


  40:Core/Src/pid.c **** 	
  41:Core/Src/pid.c **** }
  77              		.loc 1 41 1 view .LVU16
  78 0030 BDE8D083 		pop	{r4, r6, r7, r8, r9, pc}
  79              	.LVL3:
  80              	.L8:
  35:Core/Src/pid.c **** 	{
  81              		.loc 1 35 7 is_stmt 1 view .LVU17
  35:Core/Src/pid.c **** 	{
  82              		.loc 1 35 33 is_stmt 0 view .LVU18
  83 0034 D4E91889 		ldrd	r8, [r4, #96]
  35:Core/Src/pid.c **** 	{
  84              		.loc 1 35 10 view .LVU19
  85 0038 4246     		mov	r2, r8
  86 003a 4B46     		mov	r3, r9
  87 003c 3046     		mov	r0, r6
  88 003e 3946     		mov	r1, r7
  89 0040 FFF7FEFF 		bl	__aeabi_dcmplt
  90              	.LVL4:
  91 0044 0028     		cmp	r0, #0
  92 0046 F3D0     		beq	.L1
  37:Core/Src/pid.c **** 	}
  93              		.loc 1 37 3 is_stmt 1 view .LVU20
  37:Core/Src/pid.c **** 	}
  94              		.loc 1 37 19 is_stmt 0 view .LVU21
  95 0048 C4E91489 		strd	r8, [r4, #80]
  39:Core/Src/pid.c **** 	
  96              		.loc 1 39 9 is_stmt 1 view .LVU22
  97              		.loc 1 41 1 is_stmt 0 view .LVU23
  98 004c F0E7     		b	.L1
  99              		.cfi_endproc
 100              	.LFE123:
 102              		.global	__aeabi_dsub
 103              		.global	__aeabi_dmul
 104              		.global	__aeabi_dadd
 105              		.section	.text.PID_Compute,"ax",%progbits
 106              		.align	1
 107              		.global	PID_Compute
 108              		.syntax unified
 109              		.thumb
 110              		.thumb_func
 112              	PID_Compute:
 113              	.LVL5:
 114              	.LFB126:
  42:Core/Src/pid.c **** 
  43:Core/Src/pid.c **** void PID(PID_TypeDef *uPID, double *Input, double *Output, double *Setpoint, double Kp, double Ki, 
  44:Core/Src/pid.c **** {
  45:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Set parameter ~~~~~~~~~~ */
  46:Core/Src/pid.c **** 	uPID->MyOutput   = Output;
  47:Core/Src/pid.c **** 	uPID->MyInput    = Input;
  48:Core/Src/pid.c **** 	uPID->MySetpoint = Setpoint;
  49:Core/Src/pid.c **** 	uPID->InAuto     = (PIDMode_TypeDef)_FALSE;
  50:Core/Src/pid.c **** 	
  51:Core/Src/pid.c **** 	PID_SetOutputLimits(uPID, 0, _PID_8BIT_PWM_MAX);
  52:Core/Src/pid.c **** 	
  53:Core/Src/pid.c **** 	uPID->SampleTime = _PID_SAMPLE_TIME_MS_DEF; /* default Controller Sample Time is 0.1 seconds */
  54:Core/Src/pid.c **** 	
ARM GAS  /tmp/ccG2n2GW.s 			page 4


  55:Core/Src/pid.c **** 	PID_SetControllerDirection(uPID, ControllerDirection);
  56:Core/Src/pid.c **** 	PID_SetTunings2(uPID, Kp, Ki, Kd, POn);
  57:Core/Src/pid.c **** 	
  58:Core/Src/pid.c **** 	uPID->LastTime = GetTime() - uPID->SampleTime;
  59:Core/Src/pid.c **** 	
  60:Core/Src/pid.c **** }
  61:Core/Src/pid.c **** 
  62:Core/Src/pid.c **** void PID2(PID_TypeDef *uPID, double *Input, double *Output, double *Setpoint, double Kp, double Ki,
  63:Core/Src/pid.c **** {
  64:Core/Src/pid.c **** 	PID(uPID, Input, Output, Setpoint, Kp, Ki, Kd, _PID_P_ON_E, ControllerDirection);
  65:Core/Src/pid.c **** }
  66:Core/Src/pid.c **** 
  67:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~~~ Computing ~~~~~~~~~~~~~~~~~ */
  68:Core/Src/pid.c **** uint8_t PID_Compute(PID_TypeDef *uPID)
  69:Core/Src/pid.c **** {
 115              		.loc 1 69 1 is_stmt 1 view -0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 16
 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119              		.loc 1 69 1 is_stmt 0 view .LVU25
 120 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 121              		.cfi_def_cfa_offset 36
 122              		.cfi_offset 4, -36
 123              		.cfi_offset 5, -32
 124              		.cfi_offset 6, -28
 125              		.cfi_offset 7, -24
 126              		.cfi_offset 8, -20
 127              		.cfi_offset 9, -16
 128              		.cfi_offset 10, -12
 129              		.cfi_offset 11, -8
 130              		.cfi_offset 14, -4
 131 0004 2DED04AB 		vpush.64	{d10, d11}
 132              		.cfi_def_cfa_offset 52
 133              		.cfi_offset 84, -52
 134              		.cfi_offset 85, -48
 135              		.cfi_offset 86, -44
 136              		.cfi_offset 87, -40
 137 0008 85B0     		sub	sp, sp, #20
 138              		.cfi_def_cfa_offset 72
 139 000a 0446     		mov	r4, r0
  70:Core/Src/pid.c **** 	
  71:Core/Src/pid.c **** 	uint32_t now;
 140              		.loc 1 71 2 is_stmt 1 view .LVU26
  72:Core/Src/pid.c **** 	uint32_t timeChange;
 141              		.loc 1 72 2 view .LVU27
  73:Core/Src/pid.c **** 	
  74:Core/Src/pid.c **** 	double input;
 142              		.loc 1 74 2 view .LVU28
  75:Core/Src/pid.c **** 	double error;
 143              		.loc 1 75 2 view .LVU29
  76:Core/Src/pid.c **** 	double dInput;
 144              		.loc 1 76 2 view .LVU30
  77:Core/Src/pid.c **** 	double output;
 145              		.loc 1 77 2 view .LVU31
  78:Core/Src/pid.c **** 	
  79:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Check PID mode ~~~~~~~~~~ */
  80:Core/Src/pid.c **** 	if (!uPID->InAuto)
ARM GAS  /tmp/ccG2n2GW.s 			page 5


 146              		.loc 1 80 2 view .LVU32
 147              		.loc 1 80 11 is_stmt 0 view .LVU33
 148 000c 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 149              	.LVL6:
 150              		.loc 1 80 5 view .LVU34
 151 000e 20B9     		cbnz	r0, .L25
 152              	.L11:
  81:Core/Src/pid.c **** 	{
  82:Core/Src/pid.c **** 		return _FALSE;
  83:Core/Src/pid.c **** 	}
  84:Core/Src/pid.c **** 	
  85:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Calculate time ~~~~~~~~~~ */
  86:Core/Src/pid.c **** 	now        = GetTime();
  87:Core/Src/pid.c **** 	timeChange = (now - uPID->LastTime);
  88:Core/Src/pid.c **** 	
  89:Core/Src/pid.c **** 	if (timeChange >= uPID->SampleTime)
  90:Core/Src/pid.c **** 	{
  91:Core/Src/pid.c **** 		/* ..... Compute all the working error variables ..... */
  92:Core/Src/pid.c **** 		input   = *uPID->MyInput;
  93:Core/Src/pid.c **** 		error   = input - *uPID->MySetpoint;
  94:Core/Src/pid.c **** 		dInput  = (input - uPID->LastInput);
  95:Core/Src/pid.c **** 		
  96:Core/Src/pid.c **** 		uPID->OutputSum     += (uPID->Ki * error);
  97:Core/Src/pid.c **** 		
  98:Core/Src/pid.c **** 		/* ..... Add Proportional on Measurement, if P_ON_M is specified ..... */
  99:Core/Src/pid.c **** 		//we do not use this
 100:Core/Src/pid.c **** 		if (!uPID->POnE)
 101:Core/Src/pid.c **** 		{
 102:Core/Src/pid.c **** 			uPID->OutputSum -= uPID->Kp * dInput;
 103:Core/Src/pid.c **** 		}
 104:Core/Src/pid.c **** 
 105:Core/Src/pid.c **** 
 106:Core/Src/pid.c **** 		if (uPID->OutputSum > uPID->OutMax)
 107:Core/Src/pid.c **** 		{
 108:Core/Src/pid.c **** 			uPID->OutputSum = uPID->OutMax;
 109:Core/Src/pid.c **** 		}
 110:Core/Src/pid.c **** 		else if (uPID->OutputSum < uPID->OutMin)
 111:Core/Src/pid.c **** 		{
 112:Core/Src/pid.c **** 			uPID->OutputSum = uPID->OutMin;
 113:Core/Src/pid.c **** 		}
 114:Core/Src/pid.c **** 		else { }
 115:Core/Src/pid.c **** 		
 116:Core/Src/pid.c **** 		/* ..... Add Proportional on Error, if P_ON_E is specified ..... */
 117:Core/Src/pid.c **** 		if (uPID->POnE)
 118:Core/Src/pid.c **** 		{
 119:Core/Src/pid.c **** 			//has to be a - sign
 120:Core/Src/pid.c **** 			output = uPID->Kp * error;
 121:Core/Src/pid.c **** 		}
 122:Core/Src/pid.c **** 		else
 123:Core/Src/pid.c **** 		{
 124:Core/Src/pid.c **** 			output = 0;
 125:Core/Src/pid.c **** 		}
 126:Core/Src/pid.c **** 		
 127:Core/Src/pid.c **** 		/* ..... Compute Rest of PID Output ..... */
 128:Core/Src/pid.c **** 		output += uPID->OutputSum + uPID->Kd * dInput;
 129:Core/Src/pid.c **** 		
 130:Core/Src/pid.c **** 		if (output > uPID->OutMax)
ARM GAS  /tmp/ccG2n2GW.s 			page 6


 131:Core/Src/pid.c **** 		{
 132:Core/Src/pid.c **** 			output = uPID->OutMax;
 133:Core/Src/pid.c **** 		}
 134:Core/Src/pid.c **** 		else if (output < uPID->OutMin)
 135:Core/Src/pid.c **** 		{
 136:Core/Src/pid.c **** 			output = uPID->OutMin;
 137:Core/Src/pid.c **** 		}
 138:Core/Src/pid.c **** 		else { }
 139:Core/Src/pid.c **** 		
 140:Core/Src/pid.c **** 		*uPID->MyOutput = output;
 141:Core/Src/pid.c **** 		
 142:Core/Src/pid.c **** 		/* ..... Remember some variables for next time ..... */
 143:Core/Src/pid.c **** 		uPID->LastInput = input;
 144:Core/Src/pid.c **** 		uPID->LastTime = now;
 145:Core/Src/pid.c **** 		
 146:Core/Src/pid.c **** 		return _TRUE;
 147:Core/Src/pid.c **** 		
 148:Core/Src/pid.c **** 	}
 149:Core/Src/pid.c **** 	else
 150:Core/Src/pid.c **** 	{
 151:Core/Src/pid.c **** 		return _FALSE;
 152:Core/Src/pid.c **** 	}
 153:Core/Src/pid.c **** 	
 154:Core/Src/pid.c **** }
 153              		.loc 1 154 1 view .LVU35
 154 0010 05B0     		add	sp, sp, #20
 155              		.cfi_remember_state
 156              		.cfi_def_cfa_offset 52
 157              		@ sp needed
 158 0012 BDEC04AB 		vldm	sp!, {d10-d11}
 159              		.cfi_restore 86
 160              		.cfi_restore 87
 161              		.cfi_restore 84
 162              		.cfi_restore 85
 163              		.cfi_def_cfa_offset 36
 164 0016 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 165              	.LVL7:
 166              	.L25:
 167              		.cfi_restore_state
  86:Core/Src/pid.c **** 	timeChange = (now - uPID->LastTime);
 168              		.loc 1 86 2 is_stmt 1 view .LVU36
  86:Core/Src/pid.c **** 	timeChange = (now - uPID->LastTime);
 169              		.loc 1 86 15 is_stmt 0 view .LVU37
 170 001a FFF7FEFF 		bl	HAL_GetTick
 171              	.LVL8:
 172 001e 0546     		mov	r5, r0
 173              	.LVL9:
  87:Core/Src/pid.c **** 	
 174              		.loc 1 87 2 is_stmt 1 view .LVU38
  87:Core/Src/pid.c **** 	
 175              		.loc 1 87 26 is_stmt 0 view .LVU39
 176 0020 6368     		ldr	r3, [r4, #4]
  87:Core/Src/pid.c **** 	
 177              		.loc 1 87 13 view .LVU40
 178 0022 C31A     		subs	r3, r0, r3
 179              	.LVL10:
  89:Core/Src/pid.c **** 	{
ARM GAS  /tmp/ccG2n2GW.s 			page 7


 180              		.loc 1 89 2 is_stmt 1 view .LVU41
  89:Core/Src/pid.c **** 	{
 181              		.loc 1 89 24 is_stmt 0 view .LVU42
 182 0024 A268     		ldr	r2, [r4, #8]
  89:Core/Src/pid.c **** 	{
 183              		.loc 1 89 5 view .LVU43
 184 0026 9A42     		cmp	r2, r3
 185 0028 00F29480 		bhi	.L19
  92:Core/Src/pid.c **** 		error   = input - *uPID->MySetpoint;
 186              		.loc 1 92 3 is_stmt 1 view .LVU44
  92:Core/Src/pid.c **** 		error   = input - *uPID->MySetpoint;
 187              		.loc 1 92 18 is_stmt 0 view .LVU45
 188 002c 236C     		ldr	r3, [r4, #64]
 189              	.LVL11:
  92:Core/Src/pid.c **** 		error   = input - *uPID->MySetpoint;
 190              		.loc 1 92 11 view .LVU46
 191 002e D3E90089 		ldrd	r8, [r3]
 192              	.LVL12:
  93:Core/Src/pid.c **** 		dInput  = (input - uPID->LastInput);
 193              		.loc 1 93 3 is_stmt 1 view .LVU47
  93:Core/Src/pid.c **** 		dInput  = (input - uPID->LastInput);
 194              		.loc 1 93 26 is_stmt 0 view .LVU48
 195 0032 A36C     		ldr	r3, [r4, #72]
  93:Core/Src/pid.c **** 		dInput  = (input - uPID->LastInput);
 196              		.loc 1 93 11 view .LVU49
 197 0034 D3E90023 		ldrd	r2, [r3]
 198 0038 4046     		mov	r0, r8
 199              	.LVL13:
  93:Core/Src/pid.c **** 		dInput  = (input - uPID->LastInput);
 200              		.loc 1 93 11 view .LVU50
 201 003a 4946     		mov	r1, r9
 202 003c FFF7FEFF 		bl	__aeabi_dsub
 203              	.LVL14:
  93:Core/Src/pid.c **** 		dInput  = (input - uPID->LastInput);
 204              		.loc 1 93 11 view .LVU51
 205 0040 0646     		mov	r6, r0
 206 0042 0F46     		mov	r7, r1
 207 0044 CDE90267 		strd	r6, [sp, #8]
 208              	.LVL15:
  94:Core/Src/pid.c **** 		
 209              		.loc 1 94 3 is_stmt 1 view .LVU52
  94:Core/Src/pid.c **** 		
 210              		.loc 1 94 11 is_stmt 0 view .LVU53
 211 0048 D4E91623 		ldrd	r2, [r4, #88]
 212 004c 4046     		mov	r0, r8
 213 004e 4946     		mov	r1, r9
 214 0050 FFF7FEFF 		bl	__aeabi_dsub
 215              	.LVL16:
 216 0054 CDE90001 		strd	r0, [sp]
 217              	.LVL17:
  96:Core/Src/pid.c **** 		
 218              		.loc 1 96 3 is_stmt 1 view .LVU54
  96:Core/Src/pid.c **** 		
 219              		.loc 1 96 7 is_stmt 0 view .LVU55
 220 0058 D4E914AB 		ldrd	r10, [r4, #80]
  96:Core/Src/pid.c **** 		
 221              		.loc 1 96 36 view .LVU56
ARM GAS  /tmp/ccG2n2GW.s 			page 8


 222 005c 3246     		mov	r2, r6
 223 005e 3B46     		mov	r3, r7
 224 0060 D4E90C01 		ldrd	r0, [r4, #48]
 225              	.LVL18:
  96:Core/Src/pid.c **** 		
 226              		.loc 1 96 36 view .LVU57
 227 0064 FFF7FEFF 		bl	__aeabi_dmul
 228              	.LVL19:
 229 0068 0246     		mov	r2, r0
 230 006a 0B46     		mov	r3, r1
  96:Core/Src/pid.c **** 		
 231              		.loc 1 96 23 view .LVU58
 232 006c 5046     		mov	r0, r10
 233 006e 5946     		mov	r1, fp
 234 0070 FFF7FEFF 		bl	__aeabi_dadd
 235              	.LVL20:
 236 0074 0646     		mov	r6, r0
 237              	.LVL21:
  96:Core/Src/pid.c **** 		
 238              		.loc 1 96 23 view .LVU59
 239 0076 0F46     		mov	r7, r1
 240 0078 C4E91467 		strd	r6, [r4, #80]
 100:Core/Src/pid.c **** 		{
 241              		.loc 1 100 3 is_stmt 1 view .LVU60
 100:Core/Src/pid.c **** 		{
 242              		.loc 1 100 12 is_stmt 0 view .LVU61
 243 007c 94F800A0 		ldrb	r10, [r4]	@ zero_extendqisi2
 100:Core/Src/pid.c **** 		{
 244              		.loc 1 100 6 view .LVU62
 245 0080 BAF1000F 		cmp	r10, #0
 246 0084 0DD1     		bne	.L12
 102:Core/Src/pid.c **** 		}
 247              		.loc 1 102 4 is_stmt 1 view .LVU63
 102:Core/Src/pid.c **** 		}
 248              		.loc 1 102 32 is_stmt 0 view .LVU64
 249 0086 DDE90023 		ldrd	r2, [sp]
 250 008a D4E90A01 		ldrd	r0, [r4, #40]
 251 008e FFF7FEFF 		bl	__aeabi_dmul
 252              	.LVL22:
 253 0092 0246     		mov	r2, r0
 254 0094 0B46     		mov	r3, r1
 102:Core/Src/pid.c **** 		}
 255              		.loc 1 102 20 view .LVU65
 256 0096 3046     		mov	r0, r6
 257 0098 3946     		mov	r1, r7
 258 009a FFF7FEFF 		bl	__aeabi_dsub
 259              	.LVL23:
 260 009e C4E91401 		strd	r0, [r4, #80]
 261              	.L12:
 106:Core/Src/pid.c **** 		{
 262              		.loc 1 106 3 is_stmt 1 view .LVU66
 106:Core/Src/pid.c **** 		{
 263              		.loc 1 106 11 is_stmt 0 view .LVU67
 264 00a2 94ED14AB 		vldr.64	d10, [r4, #80]
 106:Core/Src/pid.c **** 		{
 265              		.loc 1 106 29 view .LVU68
 266 00a6 D4E91A67 		ldrd	r6, [r4, #104]
ARM GAS  /tmp/ccG2n2GW.s 			page 9


 106:Core/Src/pid.c **** 		{
 267              		.loc 1 106 6 view .LVU69
 268 00aa 3246     		mov	r2, r6
 269 00ac 3B46     		mov	r3, r7
 270 00ae 51EC1A0B 		vmov	r0, r1, d10
 271 00b2 FFF7FEFF 		bl	__aeabi_dcmpgt
 272              	.LVL24:
 273 00b6 0028     		cmp	r0, #0
 274 00b8 3AD0     		beq	.L23
 108:Core/Src/pid.c **** 		}
 275              		.loc 1 108 4 is_stmt 1 view .LVU70
 108:Core/Src/pid.c **** 		}
 276              		.loc 1 108 20 is_stmt 0 view .LVU71
 277 00ba C4E91467 		strd	r6, [r4, #80]
 278              	.L15:
 114:Core/Src/pid.c **** 		
 279              		.loc 1 114 10 is_stmt 1 view .LVU72
 117:Core/Src/pid.c **** 		{
 280              		.loc 1 117 3 view .LVU73
 117:Core/Src/pid.c **** 		{
 281              		.loc 1 117 6 is_stmt 0 view .LVU74
 282 00be BAF1000F 		cmp	r10, #0
 283 00c2 42D0     		beq	.L20
 120:Core/Src/pid.c **** 		}
 284              		.loc 1 120 4 is_stmt 1 view .LVU75
 120:Core/Src/pid.c **** 		}
 285              		.loc 1 120 11 is_stmt 0 view .LVU76
 286 00c4 DDE90223 		ldrd	r2, [sp, #8]
 287 00c8 D4E90A01 		ldrd	r0, [r4, #40]
 288 00cc FFF7FEFF 		bl	__aeabi_dmul
 289              	.LVL25:
 290 00d0 CDE90201 		strd	r0, [sp, #8]
 291              	.LVL26:
 292              	.L17:
 128:Core/Src/pid.c **** 		
 293              		.loc 1 128 3 is_stmt 1 view .LVU77
 128:Core/Src/pid.c **** 		
 294              		.loc 1 128 17 is_stmt 0 view .LVU78
 295 00d4 D4E914AB 		ldrd	r10, [r4, #80]
 128:Core/Src/pid.c **** 		
 296              		.loc 1 128 40 view .LVU79
 297 00d8 DDE90023 		ldrd	r2, [sp]
 298 00dc D4E90E01 		ldrd	r0, [r4, #56]
 299 00e0 FFF7FEFF 		bl	__aeabi_dmul
 300              	.LVL27:
 301 00e4 0246     		mov	r2, r0
 302 00e6 0B46     		mov	r3, r1
 128:Core/Src/pid.c **** 		
 303              		.loc 1 128 29 view .LVU80
 304 00e8 5046     		mov	r0, r10
 305 00ea 5946     		mov	r1, fp
 306 00ec FFF7FEFF 		bl	__aeabi_dadd
 307              	.LVL28:
 128:Core/Src/pid.c **** 		
 308              		.loc 1 128 10 view .LVU81
 309 00f0 DDE90223 		ldrd	r2, [sp, #8]
 310 00f4 FFF7FEFF 		bl	__aeabi_dadd
ARM GAS  /tmp/ccG2n2GW.s 			page 10


 311              	.LVL29:
 312 00f8 8246     		mov	r10, r0
 313 00fa 8B46     		mov	fp, r1
 314              	.LVL30:
 130:Core/Src/pid.c **** 		{
 315              		.loc 1 130 3 is_stmt 1 view .LVU82
 130:Core/Src/pid.c **** 		{
 316              		.loc 1 130 6 is_stmt 0 view .LVU83
 317 00fc 0246     		mov	r2, r0
 318 00fe 0B46     		mov	r3, r1
 319 0100 3046     		mov	r0, r6
 320 0102 3946     		mov	r1, r7
 321 0104 FFF7FEFF 		bl	__aeabi_dcmplt
 322              	.LVL31:
 323 0108 50B9     		cbnz	r0, .L18
 134:Core/Src/pid.c **** 		{
 324              		.loc 1 134 8 is_stmt 1 view .LVU84
 134:Core/Src/pid.c **** 		{
 325              		.loc 1 134 25 is_stmt 0 view .LVU85
 326 010a D4E91867 		ldrd	r6, [r4, #96]
 134:Core/Src/pid.c **** 		{
 327              		.loc 1 134 11 view .LVU86
 328 010e 5246     		mov	r2, r10
 329 0110 5B46     		mov	r3, fp
 330 0112 3046     		mov	r0, r6
 331 0114 3946     		mov	r1, r7
 332 0116 FFF7FEFF 		bl	__aeabi_dcmpgt
 333              	.LVL32:
 334 011a 08B9     		cbnz	r0, .L18
 128:Core/Src/pid.c **** 		
 335              		.loc 1 128 10 view .LVU87
 336 011c 5646     		mov	r6, r10
 337 011e 5F46     		mov	r7, fp
 338              	.L18:
 339              	.LVL33:
 138:Core/Src/pid.c **** 		
 340              		.loc 1 138 10 is_stmt 1 view .LVU88
 140:Core/Src/pid.c **** 		
 341              		.loc 1 140 3 view .LVU89
 140:Core/Src/pid.c **** 		
 342              		.loc 1 140 8 is_stmt 0 view .LVU90
 343 0120 636C     		ldr	r3, [r4, #68]
 140:Core/Src/pid.c **** 		
 344              		.loc 1 140 19 view .LVU91
 345 0122 C3E90067 		strd	r6, [r3]
 143:Core/Src/pid.c **** 		uPID->LastTime = now;
 346              		.loc 1 143 3 is_stmt 1 view .LVU92
 143:Core/Src/pid.c **** 		uPID->LastTime = now;
 347              		.loc 1 143 19 is_stmt 0 view .LVU93
 348 0126 C4E91689 		strd	r8, [r4, #88]
 144:Core/Src/pid.c **** 		
 349              		.loc 1 144 3 is_stmt 1 view .LVU94
 144:Core/Src/pid.c **** 		
 350              		.loc 1 144 18 is_stmt 0 view .LVU95
 351 012a 6560     		str	r5, [r4, #4]
 146:Core/Src/pid.c **** 		
 352              		.loc 1 146 3 is_stmt 1 view .LVU96
ARM GAS  /tmp/ccG2n2GW.s 			page 11


 146:Core/Src/pid.c **** 		
 353              		.loc 1 146 10 is_stmt 0 view .LVU97
 354 012c 0120     		movs	r0, #1
 355 012e 6FE7     		b	.L11
 356              	.LVL34:
 357              	.L23:
 110:Core/Src/pid.c **** 		{
 358              		.loc 1 110 8 is_stmt 1 view .LVU98
 110:Core/Src/pid.c **** 		{
 359              		.loc 1 110 34 is_stmt 0 view .LVU99
 360 0130 94ED18BB 		vldr.64	d11, [r4, #96]
 110:Core/Src/pid.c **** 		{
 361              		.loc 1 110 11 view .LVU100
 362 0134 53EC1B2B 		vmov	r2, r3, d11
 363 0138 51EC1A0B 		vmov	r0, r1, d10
 364 013c FFF7FEFF 		bl	__aeabi_dcmplt
 365              	.LVL35:
 366 0140 0028     		cmp	r0, #0
 367 0142 BCD0     		beq	.L15
 112:Core/Src/pid.c **** 		}
 368              		.loc 1 112 4 is_stmt 1 view .LVU101
 112:Core/Src/pid.c **** 		}
 369              		.loc 1 112 20 is_stmt 0 view .LVU102
 370 0144 84ED14BB 		vstr.64	d11, [r4, #80]
 371 0148 B9E7     		b	.L15
 372              	.L20:
 124:Core/Src/pid.c **** 		}
 373              		.loc 1 124 11 view .LVU103
 374 014a 9FED037B 		vldr.64	d7, .L26
 375 014e 8DED027B 		vstr.64	d7, [sp, #8]
 376              	.LVL36:
 124:Core/Src/pid.c **** 		}
 377              		.loc 1 124 11 view .LVU104
 378 0152 BFE7     		b	.L17
 379              	.LVL37:
 380              	.L19:
 151:Core/Src/pid.c **** 	}
 381              		.loc 1 151 10 view .LVU105
 382 0154 0020     		movs	r0, #0
 383              	.LVL38:
 151:Core/Src/pid.c **** 	}
 384              		.loc 1 151 10 view .LVU106
 385 0156 5BE7     		b	.L11
 386              	.L27:
 387              		.align	3
 388              	.L26:
 389 0158 00000000 		.word	0
 390 015c 00000000 		.word	0
 391              		.cfi_endproc
 392              	.LFE126:
 394              		.section	.text.PID_SetMode,"ax",%progbits
 395              		.align	1
 396              		.global	PID_SetMode
 397              		.syntax unified
 398              		.thumb
 399              		.thumb_func
 401              	PID_SetMode:
ARM GAS  /tmp/ccG2n2GW.s 			page 12


 402              	.LVL39:
 403              	.LFB127:
 155:Core/Src/pid.c **** 
 156:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~~~ PID Mode ~~~~~~~~~~~~~~~~~~ */
 157:Core/Src/pid.c **** void            PID_SetMode(PID_TypeDef *uPID, PIDMode_TypeDef Mode)
 158:Core/Src/pid.c **** {
 404              		.loc 1 158 1 is_stmt 1 view -0
 405              		.cfi_startproc
 406              		@ args = 0, pretend = 0, frame = 0
 407              		@ frame_needed = 0, uses_anonymous_args = 0
 408              		.loc 1 158 1 is_stmt 0 view .LVU108
 409 0000 38B5     		push	{r3, r4, r5, lr}
 410              		.cfi_def_cfa_offset 16
 411              		.cfi_offset 3, -16
 412              		.cfi_offset 4, -12
 413              		.cfi_offset 5, -8
 414              		.cfi_offset 14, -4
 415 0002 0446     		mov	r4, r0
 159:Core/Src/pid.c **** 	
 160:Core/Src/pid.c **** 	uint8_t newAuto = (Mode == _PID_MODE_AUTOMATIC);
 416              		.loc 1 160 2 is_stmt 1 view .LVU109
 417              		.loc 1 160 26 is_stmt 0 view .LVU110
 418 0004 0129     		cmp	r1, #1
 419 0006 0CBF     		ite	eq
 420 0008 0125     		moveq	r5, #1
 421 000a 0025     		movne	r5, #0
 422              	.LVL40:
 161:Core/Src/pid.c **** 	
 162:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Initialize the PID ~~~~~~~~~~ */
 163:Core/Src/pid.c **** 	if (newAuto && !uPID->InAuto)
 423              		.loc 1 163 2 is_stmt 1 view .LVU111
 424              		.loc 1 163 5 is_stmt 0 view .LVU112
 425 000c 01D0     		beq	.L31
 426              	.LVL41:
 427              	.L29:
 164:Core/Src/pid.c **** 	{
 165:Core/Src/pid.c **** 		PID_Init(uPID);
 166:Core/Src/pid.c **** 	}
 167:Core/Src/pid.c **** 	
 168:Core/Src/pid.c **** 	uPID->InAuto = (PIDMode_TypeDef)newAuto;
 428              		.loc 1 168 2 is_stmt 1 view .LVU113
 429              		.loc 1 168 15 is_stmt 0 view .LVU114
 430 000e 6570     		strb	r5, [r4, #1]
 169:Core/Src/pid.c **** 	
 170:Core/Src/pid.c **** }
 431              		.loc 1 170 1 view .LVU115
 432 0010 38BD     		pop	{r3, r4, r5, pc}
 433              	.LVL42:
 434              	.L31:
 163:Core/Src/pid.c **** 	{
 435              		.loc 1 163 22 discriminator 1 view .LVU116
 436 0012 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 163:Core/Src/pid.c **** 	{
 437              		.loc 1 163 14 discriminator 1 view .LVU117
 438 0014 002B     		cmp	r3, #0
 439 0016 FAD1     		bne	.L29
 165:Core/Src/pid.c **** 	}
ARM GAS  /tmp/ccG2n2GW.s 			page 13


 440              		.loc 1 165 3 is_stmt 1 view .LVU118
 441 0018 FFF7FEFF 		bl	PID_Init
 442              	.LVL43:
 165:Core/Src/pid.c **** 	}
 443              		.loc 1 165 3 is_stmt 0 view .LVU119
 444 001c F7E7     		b	.L29
 445              		.cfi_endproc
 446              	.LFE127:
 448              		.section	.text.PID_GetMode,"ax",%progbits
 449              		.align	1
 450              		.global	PID_GetMode
 451              		.syntax unified
 452              		.thumb
 453              		.thumb_func
 455              	PID_GetMode:
 456              	.LVL44:
 457              	.LFB128:
 171:Core/Src/pid.c **** PIDMode_TypeDef PID_GetMode(PID_TypeDef *uPID)
 172:Core/Src/pid.c **** {
 458              		.loc 1 172 1 is_stmt 1 view -0
 459              		.cfi_startproc
 460              		@ args = 0, pretend = 0, frame = 0
 461              		@ frame_needed = 0, uses_anonymous_args = 0
 462              		@ link register save eliminated.
 173:Core/Src/pid.c **** 	return uPID->InAuto ? _PID_MODE_AUTOMATIC : _PID_MODE_MANUAL;
 463              		.loc 1 173 2 view .LVU121
 464              		.loc 1 173 13 is_stmt 0 view .LVU122
 465 0000 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 466              	.LVL45:
 174:Core/Src/pid.c **** }
 467              		.loc 1 174 1 view .LVU123
 468 0002 0038     		subs	r0, r0, #0
 469 0004 18BF     		it	ne
 470 0006 0120     		movne	r0, #1
 471 0008 7047     		bx	lr
 472              		.cfi_endproc
 473              	.LFE128:
 475              		.global	__aeabi_dcmpge
 476              		.section	.text.PID_SetOutputLimits,"ax",%progbits
 477              		.align	1
 478              		.global	PID_SetOutputLimits
 479              		.syntax unified
 480              		.thumb
 481              		.thumb_func
 483              	PID_SetOutputLimits:
 484              	.LVL46:
 485              	.LFB129:
 175:Core/Src/pid.c **** 
 176:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~~ PID Limits ~~~~~~~~~~~~~~~~~ */
 177:Core/Src/pid.c **** void PID_SetOutputLimits(PID_TypeDef *uPID, double Min, double Max)
 178:Core/Src/pid.c **** {
 486              		.loc 1 178 1 is_stmt 1 view -0
 487              		.cfi_startproc
 488              		@ args = 0, pretend = 0, frame = 0
 489              		@ frame_needed = 0, uses_anonymous_args = 0
 490              		.loc 1 178 1 is_stmt 0 view .LVU125
 491 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
ARM GAS  /tmp/ccG2n2GW.s 			page 14


 492              		.cfi_def_cfa_offset 40
 493              		.cfi_offset 3, -40
 494              		.cfi_offset 4, -36
 495              		.cfi_offset 5, -32
 496              		.cfi_offset 6, -28
 497              		.cfi_offset 7, -24
 498              		.cfi_offset 8, -20
 499              		.cfi_offset 9, -16
 500              		.cfi_offset 10, -12
 501              		.cfi_offset 11, -8
 502              		.cfi_offset 14, -4
 503 0004 0446     		mov	r4, r0
 504 0006 59EC108B 		vmov	r8, r9, d0
 505 000a 57EC116B 		vmov	r6, r7, d1
 179:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Check value ~~~~~~~~~~ */
 180:Core/Src/pid.c **** 	if (Min >= Max)
 506              		.loc 1 180 2 is_stmt 1 view .LVU126
 507              		.loc 1 180 5 is_stmt 0 view .LVU127
 508 000e 3246     		mov	r2, r6
 509 0010 3B46     		mov	r3, r7
 510 0012 4046     		mov	r0, r8
 511              	.LVL47:
 512              		.loc 1 180 5 view .LVU128
 513 0014 4946     		mov	r1, r9
 514 0016 FFF7FEFF 		bl	__aeabi_dcmpge
 515              	.LVL48:
 516              		.loc 1 180 5 view .LVU129
 517 001a F0B9     		cbnz	r0, .L33
 181:Core/Src/pid.c **** 	{
 182:Core/Src/pid.c **** 		return;
 183:Core/Src/pid.c **** 	}
 184:Core/Src/pid.c **** 	
 185:Core/Src/pid.c **** 	uPID->OutMin = Min;
 518              		.loc 1 185 2 is_stmt 1 view .LVU130
 519              		.loc 1 185 15 is_stmt 0 view .LVU131
 520 001c C4E91889 		strd	r8, [r4, #96]
 186:Core/Src/pid.c **** 	uPID->OutMax = Max;
 521              		.loc 1 186 2 is_stmt 1 view .LVU132
 522              		.loc 1 186 15 is_stmt 0 view .LVU133
 523 0020 C4E91A67 		strd	r6, [r4, #104]
 187:Core/Src/pid.c **** 	
 188:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Check PID Mode ~~~~~~~~~~ */
 189:Core/Src/pid.c **** 	if (uPID->InAuto)
 524              		.loc 1 189 2 is_stmt 1 view .LVU134
 525              		.loc 1 189 10 is_stmt 0 view .LVU135
 526 0024 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 527              		.loc 1 189 5 view .LVU136
 528 0026 C3B1     		cbz	r3, .L33
 190:Core/Src/pid.c **** 	{
 191:Core/Src/pid.c **** 		
 192:Core/Src/pid.c **** 		/* ..... Check out value ..... */
 193:Core/Src/pid.c **** 		if (*uPID->MyOutput > uPID->OutMax)
 529              		.loc 1 193 3 is_stmt 1 view .LVU137
 530              		.loc 1 193 12 is_stmt 0 view .LVU138
 531 0028 656C     		ldr	r5, [r4, #68]
 532              		.loc 1 193 7 view .LVU139
 533 002a D5E900AB 		ldrd	r10, [r5]
ARM GAS  /tmp/ccG2n2GW.s 			page 15


 534              		.loc 1 193 6 view .LVU140
 535 002e 3246     		mov	r2, r6
 536 0030 3B46     		mov	r3, r7
 537 0032 5046     		mov	r0, r10
 538 0034 5946     		mov	r1, fp
 539 0036 FFF7FEFF 		bl	__aeabi_dcmpgt
 540              	.LVL49:
 541 003a 80B1     		cbz	r0, .L46
 194:Core/Src/pid.c **** 		{
 195:Core/Src/pid.c **** 			*uPID->MyOutput = uPID->OutMax;
 542              		.loc 1 195 4 is_stmt 1 view .LVU141
 543              		.loc 1 195 20 is_stmt 0 view .LVU142
 544 003c C5E90067 		strd	r6, [r5]
 545              	.L37:
 196:Core/Src/pid.c **** 		}
 197:Core/Src/pid.c **** 		else if (*uPID->MyOutput < uPID->OutMin)
 198:Core/Src/pid.c **** 		{
 199:Core/Src/pid.c **** 			*uPID->MyOutput = uPID->OutMin;
 200:Core/Src/pid.c **** 		}
 201:Core/Src/pid.c **** 		else { }
 546              		.loc 1 201 10 is_stmt 1 view .LVU143
 202:Core/Src/pid.c **** 		
 203:Core/Src/pid.c **** 		/* ..... Check out value ..... */
 204:Core/Src/pid.c **** 		if (uPID->OutputSum > uPID->OutMax)
 547              		.loc 1 204 3 view .LVU144
 548              		.loc 1 204 11 is_stmt 0 view .LVU145
 549 0040 D4E91467 		ldrd	r6, [r4, #80]
 550              	.LVL50:
 551              		.loc 1 204 29 view .LVU146
 552 0044 D4E91A89 		ldrd	r8, [r4, #104]
 553              	.LVL51:
 554              		.loc 1 204 6 view .LVU147
 555 0048 4246     		mov	r2, r8
 556 004a 4B46     		mov	r3, r9
 557 004c 3046     		mov	r0, r6
 558 004e 3946     		mov	r1, r7
 559 0050 FFF7FEFF 		bl	__aeabi_dcmpgt
 560              	.LVL52:
 561 0054 70B1     		cbz	r0, .L47
 205:Core/Src/pid.c **** 		{
 206:Core/Src/pid.c **** 			uPID->OutputSum = uPID->OutMax;
 562              		.loc 1 206 4 is_stmt 1 view .LVU148
 563              		.loc 1 206 20 is_stmt 0 view .LVU149
 564 0056 C4E91489 		strd	r8, [r4, #80]
 565              	.L33:
 207:Core/Src/pid.c **** 		}
 208:Core/Src/pid.c **** 		else if (uPID->OutputSum < uPID->OutMin)
 209:Core/Src/pid.c **** 		{
 210:Core/Src/pid.c **** 			uPID->OutputSum = uPID->OutMin;
 211:Core/Src/pid.c **** 		}
 212:Core/Src/pid.c **** 		else { }
 213:Core/Src/pid.c **** 		
 214:Core/Src/pid.c **** 	}
 215:Core/Src/pid.c **** 	
 216:Core/Src/pid.c **** }
 566              		.loc 1 216 1 view .LVU150
 567 005a BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
ARM GAS  /tmp/ccG2n2GW.s 			page 16


 568              	.LVL53:
 569              	.L46:
 197:Core/Src/pid.c **** 		{
 570              		.loc 1 197 8 is_stmt 1 view .LVU151
 197:Core/Src/pid.c **** 		{
 571              		.loc 1 197 11 is_stmt 0 view .LVU152
 572 005e 4246     		mov	r2, r8
 573 0060 4B46     		mov	r3, r9
 574 0062 5046     		mov	r0, r10
 575 0064 5946     		mov	r1, fp
 576 0066 FFF7FEFF 		bl	__aeabi_dcmplt
 577              	.LVL54:
 578 006a 0028     		cmp	r0, #0
 579 006c E8D0     		beq	.L37
 199:Core/Src/pid.c **** 		}
 580              		.loc 1 199 4 is_stmt 1 view .LVU153
 199:Core/Src/pid.c **** 		}
 581              		.loc 1 199 20 is_stmt 0 view .LVU154
 582 006e C5E90089 		strd	r8, [r5]
 583 0072 E5E7     		b	.L37
 584              	.LVL55:
 585              	.L47:
 208:Core/Src/pid.c **** 		{
 586              		.loc 1 208 8 is_stmt 1 view .LVU155
 208:Core/Src/pid.c **** 		{
 587              		.loc 1 208 34 is_stmt 0 view .LVU156
 588 0074 D4E91889 		ldrd	r8, [r4, #96]
 208:Core/Src/pid.c **** 		{
 589              		.loc 1 208 11 view .LVU157
 590 0078 4246     		mov	r2, r8
 591 007a 4B46     		mov	r3, r9
 592 007c 3046     		mov	r0, r6
 593 007e 3946     		mov	r1, r7
 594 0080 FFF7FEFF 		bl	__aeabi_dcmplt
 595              	.LVL56:
 596 0084 0028     		cmp	r0, #0
 597 0086 E8D0     		beq	.L33
 210:Core/Src/pid.c **** 		}
 598              		.loc 1 210 4 is_stmt 1 view .LVU158
 210:Core/Src/pid.c **** 		}
 599              		.loc 1 210 20 is_stmt 0 view .LVU159
 600 0088 C4E91489 		strd	r8, [r4, #80]
 212:Core/Src/pid.c **** 		
 601              		.loc 1 212 10 is_stmt 1 view .LVU160
 602 008c E5E7     		b	.L33
 603              		.cfi_endproc
 604              	.LFE129:
 606              		.global	__aeabi_ui2d
 607              		.global	__aeabi_ddiv
 608              		.section	.text.PID_SetTunings2,"ax",%progbits
 609              		.align	1
 610              		.global	PID_SetTunings2
 611              		.syntax unified
 612              		.thumb
 613              		.thumb_func
 615              	PID_SetTunings2:
 616              	.LVL57:
ARM GAS  /tmp/ccG2n2GW.s 			page 17


 617              	.LFB131:
 217:Core/Src/pid.c **** 
 218:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~~ PID Tunings ~~~~~~~~~~~~~~~~ */
 219:Core/Src/pid.c **** void PID_SetTunings(PID_TypeDef *uPID, double Kp, double Ki, double Kd)
 220:Core/Src/pid.c **** {
 221:Core/Src/pid.c **** 	PID_SetTunings2(uPID, Kp, Ki, Kd, uPID->POn);
 222:Core/Src/pid.c **** }
 223:Core/Src/pid.c **** void PID_SetTunings2(PID_TypeDef *uPID, double Kp, double Ki, double Kd, PIDPON_TypeDef POn)
 224:Core/Src/pid.c **** {
 618              		.loc 1 224 1 view -0
 619              		.cfi_startproc
 620              		@ args = 0, pretend = 0, frame = 0
 621              		@ frame_needed = 0, uses_anonymous_args = 0
 622              		.loc 1 224 1 is_stmt 0 view .LVU162
 623 0000 2DE9D04F 		push	{r4, r6, r7, r8, r9, r10, fp, lr}
 624              		.cfi_def_cfa_offset 32
 625              		.cfi_offset 4, -32
 626              		.cfi_offset 6, -28
 627              		.cfi_offset 7, -24
 628              		.cfi_offset 8, -20
 629              		.cfi_offset 9, -16
 630              		.cfi_offset 10, -12
 631              		.cfi_offset 11, -8
 632              		.cfi_offset 14, -4
 633 0004 2DED048B 		vpush.64	{d8, d9}
 634              		.cfi_def_cfa_offset 48
 635              		.cfi_offset 80, -48
 636              		.cfi_offset 81, -44
 637              		.cfi_offset 82, -40
 638              		.cfi_offset 83, -36
 639 0008 0446     		mov	r4, r0
 640 000a 5BEC10AB 		vmov	r10, fp, d0
 641 000e 57EC116B 		vmov	r6, r7, d1
 642 0012 B0EE428A 		vmov.f32	s16, s4
 643 0016 F0EE628A 		vmov.f32	s17, s5
 644 001a 8846     		mov	r8, r1
 225:Core/Src/pid.c **** 	
 226:Core/Src/pid.c **** 	double SampleTimeInSec;
 645              		.loc 1 226 2 is_stmt 1 view .LVU163
 227:Core/Src/pid.c **** 	
 228:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Check value ~~~~~~~~~~ */
 229:Core/Src/pid.c **** 	if (Kp < 0 || Ki < 0 || Kd < 0)
 646              		.loc 1 229 2 view .LVU164
 647              		.loc 1 229 5 is_stmt 0 view .LVU165
 648 001c 0022     		movs	r2, #0
 649 001e 0023     		movs	r3, #0
 650 0020 5046     		mov	r0, r10
 651              	.LVL58:
 652              		.loc 1 229 5 view .LVU166
 653 0022 5946     		mov	r1, fp
 654              	.LVL59:
 655              		.loc 1 229 5 view .LVU167
 656 0024 FFF7FEFF 		bl	__aeabi_dcmplt
 657              	.LVL60:
 658              		.loc 1 229 5 view .LVU168
 659 0028 0028     		cmp	r0, #0
 660 002a 42D1     		bne	.L49
ARM GAS  /tmp/ccG2n2GW.s 			page 18


 661              		.loc 1 229 13 discriminator 1 view .LVU169
 662 002c 0022     		movs	r2, #0
 663 002e 0023     		movs	r3, #0
 664 0030 3046     		mov	r0, r6
 665 0032 3946     		mov	r1, r7
 666 0034 FFF7FEFF 		bl	__aeabi_dcmplt
 667              	.LVL61:
 668 0038 0028     		cmp	r0, #0
 669 003a 3AD1     		bne	.L49
 670              		.loc 1 229 23 discriminator 2 view .LVU170
 671 003c 0022     		movs	r2, #0
 672 003e 0023     		movs	r3, #0
 673 0040 51EC180B 		vmov	r0, r1, d8
 674 0044 FFF7FEFF 		bl	__aeabi_dcmplt
 675              	.LVL62:
 676 0048 0028     		cmp	r0, #0
 677 004a 32D1     		bne	.L49
 230:Core/Src/pid.c **** 	{
 231:Core/Src/pid.c **** 		return;
 232:Core/Src/pid.c **** 	}
 233:Core/Src/pid.c **** 	
 234:Core/Src/pid.c **** 	/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
 235:Core/Src/pid.c **** 	uPID->POn    = POn;
 678              		.loc 1 235 2 is_stmt 1 view .LVU171
 679              		.loc 1 235 15 is_stmt 0 view .LVU172
 680 004c 84F80280 		strb	r8, [r4, #2]
 236:Core/Src/pid.c **** 	uPID->POnE   = (PIDPON_TypeDef)(POn == _PID_P_ON_E);
 681              		.loc 1 236 2 is_stmt 1 view .LVU173
 682              		.loc 1 236 17 is_stmt 0 view .LVU174
 683 0050 B8F1010F 		cmp	r8, #1
 684 0054 14BF     		ite	ne
 685 0056 4FF00008 		movne	r8, #0
 686 005a 4FF00108 		moveq	r8, #1
 687              		.loc 1 236 15 view .LVU175
 688 005e 84F80080 		strb	r8, [r4]
 237:Core/Src/pid.c **** 
 238:Core/Src/pid.c **** 	uPID->DispKp = Kp;
 689              		.loc 1 238 2 is_stmt 1 view .LVU176
 690              		.loc 1 238 15 is_stmt 0 view .LVU177
 691 0062 C4E904AB 		strd	r10, [r4, #16]
 239:Core/Src/pid.c **** 	uPID->DispKi = Ki;
 692              		.loc 1 239 2 is_stmt 1 view .LVU178
 693              		.loc 1 239 15 is_stmt 0 view .LVU179
 694 0066 C4E90667 		strd	r6, [r4, #24]
 240:Core/Src/pid.c **** 	uPID->DispKd = Kd;
 695              		.loc 1 240 2 is_stmt 1 view .LVU180
 696              		.loc 1 240 15 is_stmt 0 view .LVU181
 697 006a 84ED088B 		vstr.64	d8, [r4, #32]
 241:Core/Src/pid.c **** 	
 242:Core/Src/pid.c **** 	/* ~~~~~~~~~ Calculate time ~~~~~~~~ */
 243:Core/Src/pid.c **** 	SampleTimeInSec = ((double)uPID->SampleTime) / 1000;
 698              		.loc 1 243 2 is_stmt 1 view .LVU182
 699              		.loc 1 243 21 is_stmt 0 view .LVU183
 700 006e A068     		ldr	r0, [r4, #8]
 701 0070 FFF7FEFF 		bl	__aeabi_ui2d
 702              	.LVL63:
 703              		.loc 1 243 18 view .LVU184
ARM GAS  /tmp/ccG2n2GW.s 			page 19


 704 0074 0022     		movs	r2, #0
 705 0076 1D4B     		ldr	r3, .L53
 706 0078 FFF7FEFF 		bl	__aeabi_ddiv
 707              	.LVL64:
 708 007c 8046     		mov	r8, r0
 709 007e 8946     		mov	r9, r1
 710              	.LVL65:
 244:Core/Src/pid.c **** 	
 245:Core/Src/pid.c **** 	uPID->Kp = Kp;
 711              		.loc 1 245 2 is_stmt 1 view .LVU185
 712              		.loc 1 245 11 is_stmt 0 view .LVU186
 713 0080 C4E90AAB 		strd	r10, [r4, #40]
 246:Core/Src/pid.c **** 	uPID->Ki = Ki * SampleTimeInSec;
 714              		.loc 1 246 2 is_stmt 1 view .LVU187
 715              		.loc 1 246 16 is_stmt 0 view .LVU188
 716 0084 0246     		mov	r2, r0
 717 0086 0B46     		mov	r3, r1
 718 0088 3046     		mov	r0, r6
 719 008a 3946     		mov	r1, r7
 720 008c FFF7FEFF 		bl	__aeabi_dmul
 721              	.LVL66:
 722 0090 41EC190B 		vmov	d9, r0, r1
 723              		.loc 1 246 11 view .LVU189
 724 0094 C4E90C01 		strd	r0, [r4, #48]
 247:Core/Src/pid.c **** 	uPID->Kd = Kd / SampleTimeInSec;
 725              		.loc 1 247 2 is_stmt 1 view .LVU190
 726              		.loc 1 247 16 is_stmt 0 view .LVU191
 727 0098 4246     		mov	r2, r8
 728 009a 4B46     		mov	r3, r9
 729 009c 51EC180B 		vmov	r0, r1, d8
 730 00a0 FFF7FEFF 		bl	__aeabi_ddiv
 731              	.LVL67:
 732 00a4 0646     		mov	r6, r0
 733              	.LVL68:
 734              		.loc 1 247 16 view .LVU192
 735 00a6 0F46     		mov	r7, r1
 736              		.loc 1 247 11 view .LVU193
 737 00a8 C4E90E67 		strd	r6, [r4, #56]
 248:Core/Src/pid.c **** 	
 249:Core/Src/pid.c **** 	/* ~~~~~~~~ Check direction ~~~~~~~~ */
 250:Core/Src/pid.c **** 	if (uPID->ControllerDirection == _PID_CD_REVERSE)
 738              		.loc 1 250 2 is_stmt 1 view .LVU194
 739              		.loc 1 250 10 is_stmt 0 view .LVU195
 740 00ac E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 741              		.loc 1 250 5 view .LVU196
 742 00ae 012B     		cmp	r3, #1
 743 00b0 03D0     		beq	.L52
 744              	.LVL69:
 745              	.L49:
 251:Core/Src/pid.c **** 	{
 252:Core/Src/pid.c **** 		
 253:Core/Src/pid.c **** 		uPID->Kp = (0 - uPID->Kp);
 254:Core/Src/pid.c **** 		uPID->Ki = (0 - uPID->Ki);
 255:Core/Src/pid.c **** 		uPID->Kd = (0 - uPID->Kd);
 256:Core/Src/pid.c **** 		
 257:Core/Src/pid.c **** 	}
 258:Core/Src/pid.c **** 	
ARM GAS  /tmp/ccG2n2GW.s 			page 20


 259:Core/Src/pid.c **** }
 746              		.loc 1 259 1 view .LVU197
 747 00b2 BDEC048B 		vldm	sp!, {d8-d9}
 748              		.cfi_remember_state
 749              		.cfi_restore 82
 750              		.cfi_restore 83
 751              		.cfi_restore 80
 752              		.cfi_restore 81
 753              		.cfi_def_cfa_offset 32
 754              	.LVL70:
 755              		.loc 1 259 1 view .LVU198
 756 00b6 BDE8D08F 		pop	{r4, r6, r7, r8, r9, r10, fp, pc}
 757              	.LVL71:
 758              	.L52:
 759              		.cfi_restore_state
 253:Core/Src/pid.c **** 		uPID->Ki = (0 - uPID->Ki);
 760              		.loc 1 253 3 is_stmt 1 view .LVU199
 253:Core/Src/pid.c **** 		uPID->Ki = (0 - uPID->Ki);
 761              		.loc 1 253 17 is_stmt 0 view .LVU200
 762 00ba 5246     		mov	r2, r10
 763 00bc 5B46     		mov	r3, fp
 764 00be 0020     		movs	r0, #0
 765 00c0 0021     		movs	r1, #0
 766 00c2 FFF7FEFF 		bl	__aeabi_dsub
 767              	.LVL72:
 253:Core/Src/pid.c **** 		uPID->Ki = (0 - uPID->Ki);
 768              		.loc 1 253 12 view .LVU201
 769 00c6 C4E90A01 		strd	r0, [r4, #40]
 254:Core/Src/pid.c **** 		uPID->Kd = (0 - uPID->Kd);
 770              		.loc 1 254 3 is_stmt 1 view .LVU202
 254:Core/Src/pid.c **** 		uPID->Kd = (0 - uPID->Kd);
 771              		.loc 1 254 17 is_stmt 0 view .LVU203
 772 00ca 53EC192B 		vmov	r2, r3, d9
 773 00ce 0020     		movs	r0, #0
 774 00d0 0021     		movs	r1, #0
 775 00d2 FFF7FEFF 		bl	__aeabi_dsub
 776              	.LVL73:
 254:Core/Src/pid.c **** 		uPID->Kd = (0 - uPID->Kd);
 777              		.loc 1 254 12 view .LVU204
 778 00d6 C4E90C01 		strd	r0, [r4, #48]
 255:Core/Src/pid.c **** 		
 779              		.loc 1 255 3 is_stmt 1 view .LVU205
 255:Core/Src/pid.c **** 		
 780              		.loc 1 255 17 is_stmt 0 view .LVU206
 781 00da 3246     		mov	r2, r6
 782 00dc 3B46     		mov	r3, r7
 783 00de 0020     		movs	r0, #0
 784 00e0 0021     		movs	r1, #0
 785 00e2 FFF7FEFF 		bl	__aeabi_dsub
 786              	.LVL74:
 255:Core/Src/pid.c **** 		
 787              		.loc 1 255 12 view .LVU207
 788 00e6 C4E90E01 		strd	r0, [r4, #56]
 789 00ea E2E7     		b	.L49
 790              	.L54:
 791              		.align	2
 792              	.L53:
ARM GAS  /tmp/ccG2n2GW.s 			page 21


 793 00ec 00408F40 		.word	1083129856
 794              		.cfi_endproc
 795              	.LFE131:
 797              		.section	.text.PID_SetTunings,"ax",%progbits
 798              		.align	1
 799              		.global	PID_SetTunings
 800              		.syntax unified
 801              		.thumb
 802              		.thumb_func
 804              	PID_SetTunings:
 805              	.LVL75:
 806              	.LFB130:
 220:Core/Src/pid.c **** 	PID_SetTunings2(uPID, Kp, Ki, Kd, uPID->POn);
 807              		.loc 1 220 1 is_stmt 1 view -0
 808              		.cfi_startproc
 809              		@ args = 0, pretend = 0, frame = 0
 810              		@ frame_needed = 0, uses_anonymous_args = 0
 220:Core/Src/pid.c **** 	PID_SetTunings2(uPID, Kp, Ki, Kd, uPID->POn);
 811              		.loc 1 220 1 is_stmt 0 view .LVU209
 812 0000 08B5     		push	{r3, lr}
 813              		.cfi_def_cfa_offset 8
 814              		.cfi_offset 3, -8
 815              		.cfi_offset 14, -4
 221:Core/Src/pid.c **** }
 816              		.loc 1 221 2 is_stmt 1 view .LVU210
 817 0002 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 818 0004 FFF7FEFF 		bl	PID_SetTunings2
 819              	.LVL76:
 222:Core/Src/pid.c **** void PID_SetTunings2(PID_TypeDef *uPID, double Kp, double Ki, double Kd, PIDPON_TypeDef POn)
 820              		.loc 1 222 1 is_stmt 0 view .LVU211
 821 0008 08BD     		pop	{r3, pc}
 822              		.cfi_endproc
 823              	.LFE130:
 825              		.section	.text.PID_SetControllerDirection,"ax",%progbits
 826              		.align	1
 827              		.global	PID_SetControllerDirection
 828              		.syntax unified
 829              		.thumb
 830              		.thumb_func
 832              	PID_SetControllerDirection:
 833              	.LVL77:
 834              	.LFB132:
 260:Core/Src/pid.c **** 
 261:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~ PID Direction ~~~~~~~~~~~~~~~ */
 262:Core/Src/pid.c **** void          PID_SetControllerDirection(PID_TypeDef *uPID, PIDCD_TypeDef Direction)
 263:Core/Src/pid.c **** {
 835              		.loc 1 263 1 is_stmt 1 view -0
 836              		.cfi_startproc
 837              		@ args = 0, pretend = 0, frame = 0
 838              		@ frame_needed = 0, uses_anonymous_args = 0
 839              		.loc 1 263 1 is_stmt 0 view .LVU213
 840 0000 38B5     		push	{r3, r4, r5, lr}
 841              		.cfi_def_cfa_offset 16
 842              		.cfi_offset 3, -16
 843              		.cfi_offset 4, -12
 844              		.cfi_offset 5, -8
 845              		.cfi_offset 14, -4
ARM GAS  /tmp/ccG2n2GW.s 			page 22


 846 0002 0446     		mov	r4, r0
 847 0004 0D46     		mov	r5, r1
 264:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Check parameters ~~~~~~~~~~ */
 265:Core/Src/pid.c **** 	if ((uPID->InAuto) && (Direction !=uPID->ControllerDirection))
 848              		.loc 1 265 2 is_stmt 1 view .LVU214
 849              		.loc 1 265 11 is_stmt 0 view .LVU215
 850 0006 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 851              		.loc 1 265 5 view .LVU216
 852 0008 D3B1     		cbz	r3, .L58
 853              		.loc 1 265 41 discriminator 1 view .LVU217
 854 000a C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 855              		.loc 1 265 21 discriminator 1 view .LVU218
 856 000c 8B42     		cmp	r3, r1
 857 000e 17D0     		beq	.L58
 266:Core/Src/pid.c **** 	{
 267:Core/Src/pid.c **** 		
 268:Core/Src/pid.c **** 		uPID->Kp = (0 - uPID->Kp);
 858              		.loc 1 268 3 is_stmt 1 view .LVU219
 859              		.loc 1 268 17 is_stmt 0 view .LVU220
 860 0010 D0E90A23 		ldrd	r2, [r0, #40]
 861 0014 0020     		movs	r0, #0
 862              	.LVL78:
 863              		.loc 1 268 17 view .LVU221
 864 0016 0021     		movs	r1, #0
 865              	.LVL79:
 866              		.loc 1 268 17 view .LVU222
 867 0018 FFF7FEFF 		bl	__aeabi_dsub
 868              	.LVL80:
 869              		.loc 1 268 12 view .LVU223
 870 001c C4E90A01 		strd	r0, [r4, #40]
 269:Core/Src/pid.c **** 		uPID->Ki = (0 - uPID->Ki);
 871              		.loc 1 269 3 is_stmt 1 view .LVU224
 872              		.loc 1 269 17 is_stmt 0 view .LVU225
 873 0020 D4E90C23 		ldrd	r2, [r4, #48]
 874 0024 0020     		movs	r0, #0
 875 0026 0021     		movs	r1, #0
 876 0028 FFF7FEFF 		bl	__aeabi_dsub
 877              	.LVL81:
 878              		.loc 1 269 12 view .LVU226
 879 002c C4E90C01 		strd	r0, [r4, #48]
 270:Core/Src/pid.c **** 		uPID->Kd = (0 - uPID->Kd);
 880              		.loc 1 270 3 is_stmt 1 view .LVU227
 881              		.loc 1 270 17 is_stmt 0 view .LVU228
 882 0030 D4E90E23 		ldrd	r2, [r4, #56]
 883 0034 0020     		movs	r0, #0
 884 0036 0021     		movs	r1, #0
 885 0038 FFF7FEFF 		bl	__aeabi_dsub
 886              	.LVL82:
 887              		.loc 1 270 12 view .LVU229
 888 003c C4E90E01 		strd	r0, [r4, #56]
 889              	.L58:
 271:Core/Src/pid.c **** 		
 272:Core/Src/pid.c **** 	}
 273:Core/Src/pid.c **** 	
 274:Core/Src/pid.c **** 	uPID->ControllerDirection = Direction;
 890              		.loc 1 274 2 is_stmt 1 view .LVU230
 891              		.loc 1 274 28 is_stmt 0 view .LVU231
ARM GAS  /tmp/ccG2n2GW.s 			page 23


 892 0040 E570     		strb	r5, [r4, #3]
 275:Core/Src/pid.c **** 	
 276:Core/Src/pid.c **** }
 893              		.loc 1 276 1 view .LVU232
 894 0042 38BD     		pop	{r3, r4, r5, pc}
 895              		.loc 1 276 1 view .LVU233
 896              		.cfi_endproc
 897              	.LFE132:
 899              		.section	.text.PID,"ax",%progbits
 900              		.align	1
 901              		.global	PID
 902              		.syntax unified
 903              		.thumb
 904              		.thumb_func
 906              	PID:
 907              	.LVL83:
 908              	.LFB124:
  44:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Set parameter ~~~~~~~~~~ */
 909              		.loc 1 44 1 is_stmt 1 view -0
 910              		.cfi_startproc
 911              		@ args = 8, pretend = 0, frame = 0
 912              		@ frame_needed = 0, uses_anonymous_args = 0
  44:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Set parameter ~~~~~~~~~~ */
 913              		.loc 1 44 1 is_stmt 0 view .LVU235
 914 0000 10B5     		push	{r4, lr}
 915              		.cfi_def_cfa_offset 8
 916              		.cfi_offset 4, -8
 917              		.cfi_offset 14, -4
 918 0002 2DED068B 		vpush.64	{d8, d9, d10}
 919              		.cfi_def_cfa_offset 32
 920              		.cfi_offset 80, -32
 921              		.cfi_offset 81, -28
 922              		.cfi_offset 82, -24
 923              		.cfi_offset 83, -20
 924              		.cfi_offset 84, -16
 925              		.cfi_offset 85, -12
 926 0006 0446     		mov	r4, r0
 927 0008 B0EE408A 		vmov.f32	s16, s0
 928 000c F0EE608A 		vmov.f32	s17, s1
 929 0010 B0EE419A 		vmov.f32	s18, s2
 930 0014 F0EE619A 		vmov.f32	s19, s3
 931 0018 B0EE42AA 		vmov.f32	s20, s4
 932 001c F0EE62AA 		vmov.f32	s21, s5
  46:Core/Src/pid.c **** 	uPID->MyInput    = Input;
 933              		.loc 1 46 2 is_stmt 1 view .LVU236
  46:Core/Src/pid.c **** 	uPID->MyInput    = Input;
 934              		.loc 1 46 19 is_stmt 0 view .LVU237
 935 0020 4264     		str	r2, [r0, #68]
  47:Core/Src/pid.c **** 	uPID->MySetpoint = Setpoint;
 936              		.loc 1 47 2 is_stmt 1 view .LVU238
  47:Core/Src/pid.c **** 	uPID->MySetpoint = Setpoint;
 937              		.loc 1 47 19 is_stmt 0 view .LVU239
 938 0022 0164     		str	r1, [r0, #64]
  48:Core/Src/pid.c **** 	uPID->InAuto     = (PIDMode_TypeDef)_FALSE;
 939              		.loc 1 48 2 is_stmt 1 view .LVU240
  48:Core/Src/pid.c **** 	uPID->InAuto     = (PIDMode_TypeDef)_FALSE;
 940              		.loc 1 48 19 is_stmt 0 view .LVU241
ARM GAS  /tmp/ccG2n2GW.s 			page 24


 941 0024 8364     		str	r3, [r0, #72]
  49:Core/Src/pid.c **** 	
 942              		.loc 1 49 2 is_stmt 1 view .LVU242
  49:Core/Src/pid.c **** 	
 943              		.loc 1 49 19 is_stmt 0 view .LVU243
 944 0026 0023     		movs	r3, #0
 945              	.LVL84:
  49:Core/Src/pid.c **** 	
 946              		.loc 1 49 19 view .LVU244
 947 0028 4370     		strb	r3, [r0, #1]
  51:Core/Src/pid.c **** 	
 948              		.loc 1 51 2 is_stmt 1 view .LVU245
 949 002a 9FED131B 		vldr.64	d1, .L62
 950              	.LVL85:
  51:Core/Src/pid.c **** 	
 951              		.loc 1 51 2 is_stmt 0 view .LVU246
 952 002e 9FED140B 		vldr.64	d0, .L62+8
 953              	.LVL86:
  51:Core/Src/pid.c **** 	
 954              		.loc 1 51 2 view .LVU247
 955 0032 FFF7FEFF 		bl	PID_SetOutputLimits
 956              	.LVL87:
  53:Core/Src/pid.c **** 	
 957              		.loc 1 53 2 is_stmt 1 view .LVU248
  53:Core/Src/pid.c **** 	
 958              		.loc 1 53 19 is_stmt 0 view .LVU249
 959 0036 6423     		movs	r3, #100
 960 0038 A360     		str	r3, [r4, #8]
  55:Core/Src/pid.c **** 	PID_SetTunings2(uPID, Kp, Ki, Kd, POn);
 961              		.loc 1 55 2 is_stmt 1 view .LVU250
 962 003a 9DF82410 		ldrb	r1, [sp, #36]	@ zero_extendqisi2
 963 003e 2046     		mov	r0, r4
 964 0040 FFF7FEFF 		bl	PID_SetControllerDirection
 965              	.LVL88:
  56:Core/Src/pid.c **** 	
 966              		.loc 1 56 2 view .LVU251
 967 0044 9DF82010 		ldrb	r1, [sp, #32]	@ zero_extendqisi2
 968 0048 B0EE4A2A 		vmov.f32	s4, s20
 969 004c F0EE6A2A 		vmov.f32	s5, s21
 970 0050 B0EE491A 		vmov.f32	s2, s18
 971 0054 F0EE691A 		vmov.f32	s3, s19
 972 0058 B0EE480A 		vmov.f32	s0, s16
 973 005c F0EE680A 		vmov.f32	s1, s17
 974 0060 2046     		mov	r0, r4
 975 0062 FFF7FEFF 		bl	PID_SetTunings2
 976              	.LVL89:
  58:Core/Src/pid.c **** 	
 977              		.loc 1 58 2 view .LVU252
  58:Core/Src/pid.c **** 	
 978              		.loc 1 58 19 is_stmt 0 view .LVU253
 979 0066 FFF7FEFF 		bl	HAL_GetTick
 980              	.LVL90:
  58:Core/Src/pid.c **** 	
 981              		.loc 1 58 35 view .LVU254
 982 006a A368     		ldr	r3, [r4, #8]
  58:Core/Src/pid.c **** 	
 983              		.loc 1 58 29 view .LVU255
ARM GAS  /tmp/ccG2n2GW.s 			page 25


 984 006c C01A     		subs	r0, r0, r3
  58:Core/Src/pid.c **** 	
 985              		.loc 1 58 17 view .LVU256
 986 006e 6060     		str	r0, [r4, #4]
  60:Core/Src/pid.c **** 
 987              		.loc 1 60 1 view .LVU257
 988 0070 BDEC068B 		vldm	sp!, {d8-d10}
 989              		.cfi_restore 84
 990              		.cfi_restore 85
 991              		.cfi_restore 82
 992              		.cfi_restore 83
 993              		.cfi_restore 80
 994              		.cfi_restore 81
 995              		.cfi_def_cfa_offset 8
 996              	.LVL91:
  60:Core/Src/pid.c **** 
 997              		.loc 1 60 1 view .LVU258
 998 0074 10BD     		pop	{r4, pc}
 999              	.LVL92:
 1000              	.L63:
  60:Core/Src/pid.c **** 
 1001              		.loc 1 60 1 view .LVU259
 1002 0076 00BF     		.align	3
 1003              	.L62:
 1004 0078 00000000 		.word	0
 1005 007c 00E06F40 		.word	1081073664
 1006 0080 00000000 		.word	0
 1007 0084 00000000 		.word	0
 1008              		.cfi_endproc
 1009              	.LFE124:
 1011              		.section	.text.PID2,"ax",%progbits
 1012              		.align	1
 1013              		.global	PID2
 1014              		.syntax unified
 1015              		.thumb
 1016              		.thumb_func
 1018              	PID2:
 1019              	.LVL93:
 1020              	.LFB125:
  63:Core/Src/pid.c **** 	PID(uPID, Input, Output, Setpoint, Kp, Ki, Kd, _PID_P_ON_E, ControllerDirection);
 1021              		.loc 1 63 1 is_stmt 1 view -0
 1022              		.cfi_startproc
 1023              		@ args = 4, pretend = 0, frame = 0
 1024              		@ frame_needed = 0, uses_anonymous_args = 0
  63:Core/Src/pid.c **** 	PID(uPID, Input, Output, Setpoint, Kp, Ki, Kd, _PID_P_ON_E, ControllerDirection);
 1025              		.loc 1 63 1 is_stmt 0 view .LVU261
 1026 0000 10B5     		push	{r4, lr}
 1027              		.cfi_def_cfa_offset 8
 1028              		.cfi_offset 4, -8
 1029              		.cfi_offset 14, -4
 1030 0002 82B0     		sub	sp, sp, #8
 1031              		.cfi_def_cfa_offset 16
  64:Core/Src/pid.c **** }
 1032              		.loc 1 64 2 is_stmt 1 view .LVU262
 1033 0004 9DF81040 		ldrb	r4, [sp, #16]	@ zero_extendqisi2
 1034 0008 0194     		str	r4, [sp, #4]
 1035 000a 0124     		movs	r4, #1
ARM GAS  /tmp/ccG2n2GW.s 			page 26


 1036 000c 0094     		str	r4, [sp]
 1037 000e FFF7FEFF 		bl	PID
 1038              	.LVL94:
  65:Core/Src/pid.c **** 
 1039              		.loc 1 65 1 is_stmt 0 view .LVU263
 1040 0012 02B0     		add	sp, sp, #8
 1041              		.cfi_def_cfa_offset 8
 1042              		@ sp needed
 1043 0014 10BD     		pop	{r4, pc}
  65:Core/Src/pid.c **** 
 1044              		.loc 1 65 1 view .LVU264
 1045              		.cfi_endproc
 1046              	.LFE125:
 1048              		.section	.text.PID_GetDirection,"ax",%progbits
 1049              		.align	1
 1050              		.global	PID_GetDirection
 1051              		.syntax unified
 1052              		.thumb
 1053              		.thumb_func
 1055              	PID_GetDirection:
 1056              	.LVL95:
 1057              	.LFB133:
 277:Core/Src/pid.c **** PIDCD_TypeDef PID_GetDirection(PID_TypeDef *uPID)
 278:Core/Src/pid.c **** {
 1058              		.loc 1 278 1 is_stmt 1 view -0
 1059              		.cfi_startproc
 1060              		@ args = 0, pretend = 0, frame = 0
 1061              		@ frame_needed = 0, uses_anonymous_args = 0
 1062              		@ link register save eliminated.
 279:Core/Src/pid.c **** 	return uPID->ControllerDirection;
 1063              		.loc 1 279 2 view .LVU266
 280:Core/Src/pid.c **** }
 1064              		.loc 1 280 1 is_stmt 0 view .LVU267
 1065 0000 C078     		ldrb	r0, [r0, #3]	@ zero_extendqisi2
 1066              	.LVL96:
 1067              		.loc 1 280 1 view .LVU268
 1068 0002 7047     		bx	lr
 1069              		.cfi_endproc
 1070              	.LFE133:
 1072              		.global	__aeabi_i2d
 1073              		.section	.text.PID_SetSampleTime,"ax",%progbits
 1074              		.align	1
 1075              		.global	PID_SetSampleTime
 1076              		.syntax unified
 1077              		.thumb
 1078              		.thumb_func
 1080              	PID_SetSampleTime:
 1081              	.LVL97:
 1082              	.LFB134:
 281:Core/Src/pid.c **** 
 282:Core/Src/pid.c **** /* ~~~~~~~~~~~~~~~ PID Sampling ~~~~~~~~~~~~~~~~ */
 283:Core/Src/pid.c **** void PID_SetSampleTime(PID_TypeDef *uPID, int32_t NewSampleTime)
 284:Core/Src/pid.c **** {
 1083              		.loc 1 284 1 is_stmt 1 view -0
 1084              		.cfi_startproc
 1085              		@ args = 0, pretend = 0, frame = 0
 1086              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccG2n2GW.s 			page 27


 1087              		.loc 1 284 1 is_stmt 0 view .LVU270
 1088 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1089              		.cfi_def_cfa_offset 24
 1090              		.cfi_offset 3, -24
 1091              		.cfi_offset 4, -20
 1092              		.cfi_offset 5, -16
 1093              		.cfi_offset 6, -12
 1094              		.cfi_offset 7, -8
 1095              		.cfi_offset 14, -4
 285:Core/Src/pid.c **** 	
 286:Core/Src/pid.c **** 	double ratio;
 1096              		.loc 1 286 2 is_stmt 1 view .LVU271
 287:Core/Src/pid.c **** 	
 288:Core/Src/pid.c **** 	/* ~~~~~~~~~~ Check value ~~~~~~~~~~ */
 289:Core/Src/pid.c **** 	if (NewSampleTime > 0)
 1097              		.loc 1 289 2 view .LVU272
 1098              		.loc 1 289 5 is_stmt 0 view .LVU273
 1099 0002 0D1E     		subs	r5, r1, #0
 1100 0004 21DD     		ble	.L67
 1101 0006 0446     		mov	r4, r0
 290:Core/Src/pid.c **** 	{
 291:Core/Src/pid.c **** 		
 292:Core/Src/pid.c **** 		ratio = (double)NewSampleTime / (double)uPID->SampleTime;
 1102              		.loc 1 292 3 is_stmt 1 view .LVU274
 1103              		.loc 1 292 11 is_stmt 0 view .LVU275
 1104 0008 2846     		mov	r0, r5
 1105              	.LVL98:
 1106              		.loc 1 292 11 view .LVU276
 1107 000a FFF7FEFF 		bl	__aeabi_i2d
 1108              	.LVL99:
 1109              		.loc 1 292 11 view .LVU277
 1110 000e 0646     		mov	r6, r0
 1111 0010 0F46     		mov	r7, r1
 1112              		.loc 1 292 35 view .LVU278
 1113 0012 A068     		ldr	r0, [r4, #8]
 1114 0014 FFF7FEFF 		bl	__aeabi_ui2d
 1115              	.LVL100:
 1116 0018 0246     		mov	r2, r0
 1117 001a 0B46     		mov	r3, r1
 1118              		.loc 1 292 9 view .LVU279
 1119 001c 3046     		mov	r0, r6
 1120 001e 3946     		mov	r1, r7
 1121 0020 FFF7FEFF 		bl	__aeabi_ddiv
 1122              	.LVL101:
 1123 0024 0646     		mov	r6, r0
 1124 0026 0F46     		mov	r7, r1
 1125              	.LVL102:
 293:Core/Src/pid.c **** 		
 294:Core/Src/pid.c **** 		uPID->Ki *= ratio;
 1126              		.loc 1 294 3 is_stmt 1 view .LVU280
 1127              		.loc 1 294 12 is_stmt 0 view .LVU281
 1128 0028 0246     		mov	r2, r0
 1129 002a 0B46     		mov	r3, r1
 1130 002c D4E90C01 		ldrd	r0, [r4, #48]
 1131 0030 FFF7FEFF 		bl	__aeabi_dmul
 1132              	.LVL103:
 1133 0034 C4E90C01 		strd	r0, [r4, #48]
ARM GAS  /tmp/ccG2n2GW.s 			page 28


 295:Core/Src/pid.c **** 		uPID->Kd /= ratio;
 1134              		.loc 1 295 3 is_stmt 1 view .LVU282
 1135              		.loc 1 295 12 is_stmt 0 view .LVU283
 1136 0038 3246     		mov	r2, r6
 1137 003a 3B46     		mov	r3, r7
 1138 003c D4E90E01 		ldrd	r0, [r4, #56]
 1139 0040 FFF7FEFF 		bl	__aeabi_ddiv
 1140              	.LVL104:
 1141 0044 C4E90E01 		strd	r0, [r4, #56]
 296:Core/Src/pid.c **** 		uPID->SampleTime = (uint32_t)NewSampleTime;
 1142              		.loc 1 296 3 is_stmt 1 view .LVU284
 1143              		.loc 1 296 20 is_stmt 0 view .LVU285
 1144 0048 A560     		str	r5, [r4, #8]
 1145              	.LVL105:
 1146              	.L67:
 297:Core/Src/pid.c **** 		
 298:Core/Src/pid.c **** 	}
 299:Core/Src/pid.c **** 	
 300:Core/Src/pid.c **** }
 1147              		.loc 1 300 1 view .LVU286
 1148 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1149              		.loc 1 300 1 view .LVU287
 1150              		.cfi_endproc
 1151              	.LFE134:
 1153              		.section	.text.PID_GetKp,"ax",%progbits
 1154              		.align	1
 1155              		.global	PID_GetKp
 1156              		.syntax unified
 1157              		.thumb
 1158              		.thumb_func
 1160              	PID_GetKp:
 1161              	.LVL106:
 1162              	.LFB135:
 301:Core/Src/pid.c **** 
 302:Core/Src/pid.c **** /* ~~~~~~~~~~~~~ Get Tunings Param ~~~~~~~~~~~~~ */
 303:Core/Src/pid.c **** double PID_GetKp(PID_TypeDef *uPID)
 304:Core/Src/pid.c **** {
 1163              		.loc 1 304 1 is_stmt 1 view -0
 1164              		.cfi_startproc
 1165              		@ args = 0, pretend = 0, frame = 0
 1166              		@ frame_needed = 0, uses_anonymous_args = 0
 1167              		@ link register save eliminated.
 305:Core/Src/pid.c **** 	return uPID->DispKp;
 1168              		.loc 1 305 2 view .LVU289
 306:Core/Src/pid.c **** }
 1169              		.loc 1 306 1 is_stmt 0 view .LVU290
 1170 0000 90ED040B 		vldr.64	d0, [r0, #16]
 1171 0004 7047     		bx	lr
 1172              		.cfi_endproc
 1173              	.LFE135:
 1175              		.section	.text.PID_GetKi,"ax",%progbits
 1176              		.align	1
 1177              		.global	PID_GetKi
 1178              		.syntax unified
 1179              		.thumb
 1180              		.thumb_func
 1182              	PID_GetKi:
ARM GAS  /tmp/ccG2n2GW.s 			page 29


 1183              	.LVL107:
 1184              	.LFB136:
 307:Core/Src/pid.c **** double PID_GetKi(PID_TypeDef *uPID)
 308:Core/Src/pid.c **** {
 1185              		.loc 1 308 1 is_stmt 1 view -0
 1186              		.cfi_startproc
 1187              		@ args = 0, pretend = 0, frame = 0
 1188              		@ frame_needed = 0, uses_anonymous_args = 0
 1189              		@ link register save eliminated.
 309:Core/Src/pid.c **** 	return uPID->DispKi;
 1190              		.loc 1 309 2 view .LVU292
 310:Core/Src/pid.c **** }
 1191              		.loc 1 310 1 is_stmt 0 view .LVU293
 1192 0000 90ED060B 		vldr.64	d0, [r0, #24]
 1193 0004 7047     		bx	lr
 1194              		.cfi_endproc
 1195              	.LFE136:
 1197              		.section	.text.PID_GetKd,"ax",%progbits
 1198              		.align	1
 1199              		.global	PID_GetKd
 1200              		.syntax unified
 1201              		.thumb
 1202              		.thumb_func
 1204              	PID_GetKd:
 1205              	.LVL108:
 1206              	.LFB137:
 311:Core/Src/pid.c **** double PID_GetKd(PID_TypeDef *uPID)
 312:Core/Src/pid.c **** {
 1207              		.loc 1 312 1 is_stmt 1 view -0
 1208              		.cfi_startproc
 1209              		@ args = 0, pretend = 0, frame = 0
 1210              		@ frame_needed = 0, uses_anonymous_args = 0
 1211              		@ link register save eliminated.
 313:Core/Src/pid.c **** 	return uPID->DispKd;
 1212              		.loc 1 313 2 view .LVU295
 314:Core/Src/pid.c **** }
 1213              		.loc 1 314 1 is_stmt 0 view .LVU296
 1214 0000 90ED080B 		vldr.64	d0, [r0, #32]
 1215 0004 7047     		bx	lr
 1216              		.cfi_endproc
 1217              	.LFE137:
 1219              		.text
 1220              	.Letext0:
 1221              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 1222              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 1223              		.file 4 "Core/Inc/pid.h"
 1224              		.file 5 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal.h"
ARM GAS  /tmp/ccG2n2GW.s 			page 30


DEFINED SYMBOLS
                            *ABS*:0000000000000000 pid.c
     /tmp/ccG2n2GW.s:23     .text.PID_Init:0000000000000000 $t
     /tmp/ccG2n2GW.s:29     .text.PID_Init:0000000000000000 PID_Init
     /tmp/ccG2n2GW.s:106    .text.PID_Compute:0000000000000000 $t
     /tmp/ccG2n2GW.s:112    .text.PID_Compute:0000000000000000 PID_Compute
     /tmp/ccG2n2GW.s:389    .text.PID_Compute:0000000000000158 $d
     /tmp/ccG2n2GW.s:395    .text.PID_SetMode:0000000000000000 $t
     /tmp/ccG2n2GW.s:401    .text.PID_SetMode:0000000000000000 PID_SetMode
     /tmp/ccG2n2GW.s:449    .text.PID_GetMode:0000000000000000 $t
     /tmp/ccG2n2GW.s:455    .text.PID_GetMode:0000000000000000 PID_GetMode
     /tmp/ccG2n2GW.s:477    .text.PID_SetOutputLimits:0000000000000000 $t
     /tmp/ccG2n2GW.s:483    .text.PID_SetOutputLimits:0000000000000000 PID_SetOutputLimits
     /tmp/ccG2n2GW.s:609    .text.PID_SetTunings2:0000000000000000 $t
     /tmp/ccG2n2GW.s:615    .text.PID_SetTunings2:0000000000000000 PID_SetTunings2
     /tmp/ccG2n2GW.s:793    .text.PID_SetTunings2:00000000000000ec $d
     /tmp/ccG2n2GW.s:798    .text.PID_SetTunings:0000000000000000 $t
     /tmp/ccG2n2GW.s:804    .text.PID_SetTunings:0000000000000000 PID_SetTunings
     /tmp/ccG2n2GW.s:826    .text.PID_SetControllerDirection:0000000000000000 $t
     /tmp/ccG2n2GW.s:832    .text.PID_SetControllerDirection:0000000000000000 PID_SetControllerDirection
     /tmp/ccG2n2GW.s:900    .text.PID:0000000000000000 $t
     /tmp/ccG2n2GW.s:906    .text.PID:0000000000000000 PID
     /tmp/ccG2n2GW.s:1004   .text.PID:0000000000000078 $d
     /tmp/ccG2n2GW.s:1012   .text.PID2:0000000000000000 $t
     /tmp/ccG2n2GW.s:1018   .text.PID2:0000000000000000 PID2
     /tmp/ccG2n2GW.s:1049   .text.PID_GetDirection:0000000000000000 $t
     /tmp/ccG2n2GW.s:1055   .text.PID_GetDirection:0000000000000000 PID_GetDirection
     /tmp/ccG2n2GW.s:1074   .text.PID_SetSampleTime:0000000000000000 $t
     /tmp/ccG2n2GW.s:1080   .text.PID_SetSampleTime:0000000000000000 PID_SetSampleTime
     /tmp/ccG2n2GW.s:1154   .text.PID_GetKp:0000000000000000 $t
     /tmp/ccG2n2GW.s:1160   .text.PID_GetKp:0000000000000000 PID_GetKp
     /tmp/ccG2n2GW.s:1176   .text.PID_GetKi:0000000000000000 $t
     /tmp/ccG2n2GW.s:1182   .text.PID_GetKi:0000000000000000 PID_GetKi
     /tmp/ccG2n2GW.s:1198   .text.PID_GetKd:0000000000000000 $t
     /tmp/ccG2n2GW.s:1204   .text.PID_GetKd:0000000000000000 PID_GetKd

UNDEFINED SYMBOLS
__aeabi_dcmpgt
__aeabi_dcmplt
__aeabi_dsub
__aeabi_dmul
__aeabi_dadd
HAL_GetTick
__aeabi_dcmpge
__aeabi_ui2d
__aeabi_ddiv
__aeabi_i2d
